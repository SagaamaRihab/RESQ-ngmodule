<div class="evacuation-wrapper">

  <div class="evacuation-card fade-in">

    <!-- HEADER -->
    <div class="card-header">

      <div class="header-icon">
        <i class="fa-solid fa-route"></i>
      </div>

      <h1>Pianificazione evacuazione</h1>

      <div class="divider"></div>

      <p>
        Inserisci il nodo in cui ti trovi.
        Il sistema calcolerà il percorso di evacuazione più sicuro.
      </p>

    </div>


    <!-- FORM -->
    <div class="form-section">

      <div class="form-group">

        <label for="startNode">Nodo di partenza</label>

        <div class="input-wrapper">

          <i class="fa-solid fa-location-dot"></i>

          <input
            id="startNode"
            type="text"
            [(ngModel)]="startNode"
            placeholder="Es. A101"
          />

        </div>

      </div>


      <button
        class="btn-submit"
        (click)="calculate()"
        [disabled]="loading">

        <span *ngIf="!loading">Calcola percorso</span>

        <span *ngIf="loading" class="spinner"></span>

      </button>

    </div>


    <!-- STATUS -->

    <div *ngIf="error" class="status status-error">
      {{ error }}
    </div>


    <div *ngIf="response" class="result-card">

      <h3>Percorso consigliato</h3>

      <p>{{ response.message }}</p>

      <ul class="path-list">
        <li *ngFor="let node of response.path">
          {{ node }}
        </li>
      </ul>

      <app-path-viewer
        *ngIf="response.path.length"
        [path]="response.path">
      </app-path-viewer>

    </div>

  </div>

</div>
